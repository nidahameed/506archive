# SI 506: Last Assignment

## SWAPI: Episode VII The Force Awakens

## 1.0 Overview

The last assignment is open network, open readings, open notes, open slide decks. You may refer to
code in previous lecture exercises, lab exercises, and problem sets and incorporate it as necessary.

## 2.0 Points

The last assignment is worth 1800 points and you accumulate points by passing a series of autograder
tests.

## 3.0 Important dates

* Available: Tuesday, 1 December, 2020, 4:00 pm Eastern
* Due: Friday, 18 December, 2020, 11:59 PM Eastern

:exclamation: No late submissions will be accepted for scoring.

## 3.0 A few rules

### 3.1 Questions

If you have questions, post them on Piazza. When creating a new post specify the "last_assignment"
folder, in order to categorize the post properly.

If you need the teaching team to review code, mark your post as __private__.  If you reveal code
publicly we will delete the post.

### 3.2 Prohibitions

You are prohibited from soliciting assistance or accepting assistance from any person (other than
the teaching team) while working on the last assignment. The last assignment code that you submit
_must_ constitute your own work, excepting code incorported from SI 506 lectures, labs, and
assigments.

Likewise, you are prohibited from assisting any other student engaging with the last assignment.

## 4.0 Files

The last assignment comprises several files including a README, template, and CSV and JSON files.

### 4.1 README file

As per standard SI 506 practice last assignment instructions will be found in `README.md`
(this document).

### 4.2 Template file

The template file `swapi.py` contains a number of class and function definitions that you will
implement together with a `main()` function that will serve as the entry point for the program
you write.

From `main()` you will implement the program workflow that will involve the following operations:

* read data in from local files
* make HTTP GET requests to the remote SWAPI service
* instantiate class instances and call class methods
* call functions
* assign return values to specified variables
* write data to local files serialized (encoded) as JSON

### 4.3 CSV and JSON files

You will be supplied with CSV and JSON files that include data for use in your program. Locate the
files in the _same directory_ where you place your template file.

* wookieepedia_droids.json
* wookieepedia_people.json
* wookieepedia_planets.csv
* wookieepedia_star_map.json
* wookiee_starships.csv

### 4.4 Fixture JSON files

You will be supplied with a set of test fixture JSON files (prefixed with "fxt_") that the output
generated by your program __must__ match, line for line, and character for character. Review these
files; they constitute the answer keys and should be utilized for comparison purposes as you work
your way through the assignment.

* fxt_episode_vii_mission_jakku.json
* fxt_episode_vii_escape_jakku.json
* fxt_episode_vii_star_map.json
* fxt_episode_vii_journey_takodana.json

## 5.0 A note on styling

The autograder includes tests that will check whether or not you are adhering to Python styling
guidelines relative to the [use of whitespace](https://www.python.org/dev/peps/pep-0008/#id26) in
certain expressions and statements. The goal is to encourage you to write code that adheres to
the Python community's code styling practices. Doing so enhances code readability and aligns you
with other Python programmers.

In particular, always surround the following operators on either side with a single space:

* assignment (`=`)
* augmented assignment (`+=`, `-=`, etc.)
* comparisons (`==`, `<`, `>`, `!=`, `<>`, `<=`, `>=`, `in`, `not in`, `is`, `is not`)
* Booleans (`and`, `or`, `not`).

```python
# Correct
clubs = search_club_names(clubs, search_term)

# Incorrect
clubs=search_club_names(clubs, search_term)

# Correct
count += 1

# Incorrect
count+=1
```

Note however that an exception exists with respect to function and class method parameters and
arguments. Do _not_ surround optional parameter default value assignments or keyword argument
assignments with spaces.

```python
# Correct
def create_email_address(uniqname, domain='umich.edu'):
   """TODO"""

   return f"{uniqname}@{domain}"

# Incorrect
def create_email_address(uniqname, domain = 'umich.edu'):
   """TODO"""

   return f"{uniqname}@{domain}"

# Correct
email_address = create_email_address(uniqname='anthwhyte', domain='gmail.com')

# Incorrect
email_address = create_email_address(uniqname = 'anthwhyte', domain = 'gmail.com')
```

## 6.0 Challenges

The year is 34 ABY ([Galactic Calendar](https://starwars.fandom.com/wiki/Galactic_calendar)).

> Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of
> the Empire and will not rest until Skywalker, the last Jedi, has been destroyed.

> With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate
> to find her brother Luke and gain his help in restoring peace and justice to the galaxy.

> Leia has sent her most daring pilot on a secret mission to Jakku, where an old ally has discovered
> a clue to Luke's whereabouts. . . .

You will implement a number of classes and functions that will permit you to represent several
crucial incidents in the Resistance's ongoing struggle with the First Order as JSON written to
files. Program workflow will be orchestrated from the `main()` function.

As you work your way through the challenges a "creational" pattern should become apparent.

1. Issue an HTTP GET request using the requests module and retrieve a resource from SWAPI.
2. Combine with data sourced from Wookieepedia and stored locally in a CSV or JSON file.
3. "Clean" certain string values by converting the values to a different type, e.g., `float`, `int`,
   `list` or `None`.
4. Instantiate an object instance by calling the appropriate `create_< class name>()` function and
   passing to it the "blended" and "cleaned" data as an argument.
5. Write a JSON-friendly representation of the object(s) to a file.

The last assignment is based on data sourced from the [Star Wars API](https://swapi.py4e.com/)
(SWAPI) and [Wookieepedia](https://starwars.fandom.com/).

May the Force be with you.

## Challenge 01

Implement the following four "utility" functions:

1. `get_swapi_resource()`
2. `read_csv_into_dicts()`
3. `read_json()`
4. `write_json()`

:bulb: All of the functions listed above were introduced during post-midterm lectures. Feel free to
source the needed function code blocks from the lecture notes and in-class exercise solution files.
Lecture notes, and in-class exercise code are available in Canvas Files.

:exclamation: If you want to use VS Code's debugger you may need to uncomment the `abs_path`
variable and then construct a path using `os.path.join()`.  Commented out absolute paths are
included in the assignment file. However, you _must_ revert back to using relative paths
(i.e, `stu_swapi_species_wookiee.json`) when submitting your work to Gradescope.

```python
# ABSOLUTE PATH (VS CODE DEBUGGER-FRIENDLY)
# WARN: autograder does not require absolute paths
# abs_path = os.path.dirname(os.path.abspath(__file__))
# print(f"\n0.0: Absolute directory path = {abs_path}")

# Example: absolute filepath (create)
# filepath = os.path.join(abs_path, 'stu_swapi_species_wookiee.json')

# Example: relative filepath
# filepath = 'stu_swapi_species_wookiee.json'
```

## Challenge 02

Implement the `Species` class and the function `create_species()`. This challenge constitutes a
"warm up" exercise.

:bulb: Read all `Species` Docstrings before commencing your implementation work.

### 02.1 `Species` class

Implement the following methods:

* `__init__()`. Replace `pass` and add the required five (5) instance variables and assign the
  requisite value to each instance variable per the listed parameters.

* `__str__()`. Replace `pass` and return the `Species` instance's name.

* `jsonable()`. Replace `pass` and return a JSON-friendly dictionary comprising all the instance
  variables and their values expressed as key-value pairs
  __in the order specified in the Docstring__. This is best accomplished by returning a dictionary
  literal.

  ```python
  return {
      '< instance variable name >': < instance variable value >,
      # add additional key-value pairs
      }
  ```

### 02.2 `create_species()` function

Replace `pass` with a code block that instantiates an instance of `Species` using the passed in
`data` (dict) for assigning instance variable values and then return the instance to the caller.

:bulb: when initializing the `Species` instance use the `data` dictionary's `dict.get(< key >)`
method to retrieve values from `data`. Make this a regular implementation practice for the remainder
of this assignment when instantiating instances of `Droid`, `Person`, `Planet`, `Species`, and
`Starship` using `create_< class name >()` functions.

```python
species = Species(
  # data.get(< key >),
  # . . .
  )

return species
```

:bulb: Over the course of this assignment you will create a number of `create_< class name >()`
"convenience" functions to simplify creating instances of `Droid`, `Person`, `Planet`,
`Starship`, and `Species` based on passed in dictionary key-value pairs.

Trust me, you want to avoid having to write multiple lines of code unnecessarily every time you need
to instantiate an instance of any of the classes defined in this assignment. Instead, you will
implement "convenience" functions in order to encapsulate the code required to instantiate a
class instance and, in so doing, keep code duplication to a minimium. This approach adheres to the
[DRY principle](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself): Don't repeat yourself.

Once implemented you can call `create_< class name >()` in `main()` as many times as needed to
instantiate class instances. That's one (1) line of code in `main()` vs fifteen (15) lines of code
that is otherwise required to instantiate an instance of `Starship`.

### 02.3 Test your work

Test your work by calling `get_swapi_resource()` from `main()`, passing to it the following
arguments:

`url` = "https://swapi.py4e.com/api/species/"
`params` = {'search': 'wookiee'}

Assign the return value to `wookiee_data` _after_ accessing the "Wookiee" dictionary from the
response dictionary's `['results']` list.

Next, call `create_species(wookiee_data)` and assign the `Wookiee` instance returned to a
variable named `wookiee`.

Finally, call `write_json()` and pass to it the following arguments:

* `filepath` = 'stu_swapi_species_wookiee.json'
* `data` = JSON-friendly representation of `wookiee` (call its `jsonable()` method)

Review the file output (know your data) and submit your (partially completed) `swapi.py` file to
Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_species_wookiee.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/species/3/",
  "name": "Wookiee",
  "classification": "mammal",
  "designation": "sentient",
  "language": "Shyriiwook"
}
```

:bulb: remember to make frequent use of the built-in `print()` function to check values as you work.
When satisfied you can comment out `print()` or delete the line.

## Challenge 03

Implement the `Planet` class and the function `create_planets()`.

### 03.1 `Planet` class

Implement the following methods:

* `__init__()`. Replace `pass` and add the required twelve (12) instance variables and assign
  the requisite value to each instance variable per the listed parameters.

* `__str__()`. Replace `pass` and return the `Planet` instance's name.

* `jsonable()`. Replace `pass` and return a JSON-friendly dictionary comprising all the instance
  variables and their values expressed as key-value pairs
  __in the order specified in the Docstring__. This is best accomplished by returning a dictionary
  literal.

### 03.2 `create_planet()` function

Replace `pass` with a code block that instantiates an instance of `Planet` using the passed in
`data` (dict) for assigning instance variable values and then return the instance to the caller.

### 03.3 Test your work

Test your work by calling `get_swapi_resource()` from `main()` and retrieve a dictionary
representation of the ice planet __Hoth__. See the SWAPI
[documentation](https://swapi.py4e.com/documentation) if you need help constructing the arguments
to pass to `get_swapi_resource()`.

Access the "Hoth" dictionary which is stored in the response object and assign the value to
`hoth_data`.

:exclamation: The SWAPI data will serve as the default representation of all planets that you
encounter in this assignment. You will update the SWAPI data with data sourced from Wookieepedia.

Next, call `read_csv_into_dicts()` and retrieve the planet data contained in the file
`wookieepedia_planets.csv`. Assign the return value to a variable named `wookiee_planets`.

:bulb: You will use `wookiee_planets` throughout the remainder of this assignment.

Next, access the planet Hoth element in `wookiee_planets` by its index value and __update__ the
`hoth_data` dictionary with the `wookiee_planets` Hoth dictionary.

:bulb: Recall that there is a convenient `dict` method available for accomplishing the above task.

Next, call `create_planet()` passing to it `hoth_data` as an argument and assign the `Planet`
instance returned to a variable named `hoth`.

Finally, call `write_json()` and pass it the following arguments:

* `filepath` = 'stu_swapi_planet_hoth.json'
* `data` = JSON-friendly representation of `hoth` (a `dict`)

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_planet_hoth.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/planets/4/",
  "name": "Hoth",
  "region": "Outer Rim Territories",
  "sector": "Anoat sector",
  "suns": "1",
  "moons": "3",
  "orbital_period_days": "549",
  "diameter_km": "7200",
  "gravity": "1.1 standard",
  "climate": "Frigid",
  "terrain": "Frozen ice plains, Glaciers, Oceans, Mountains",
  "population": "10"
}
```

## Challenge 04

Implement the `Droid` class and the function `create_droids()`.

### 04.1 `Droid` class

Implement the following methods:

* `__init__()`. Replace `pass` with the required eight (8) instance variables and assign the
  requisite value to each instance variable per the listed parameters. Add an optional
  `instructions` instance variable and assign it an empty list (`[]`) as its default value.

* `__str__()`. Replace `pass` and return the `Droid` instance's name.

* `store_instructions()`. Replace `pass` and write a single line of code that accepts the passed in
  `instructions` (a nested `dict`) and appends it to the `instructions` instance variable.

* `jsonable()`. Replace `pass` and return a JSON-friendly dictionary comprising all the instance
  variables and their values expressed as key-value pairs
  __in the order specified in the Docstring__. This is best accomplished by returning a dictionary
  literal.

### 04.2 `create_droid()` function

Replace `pass` with a code block that instantiates an instance of `Droid` using the passed in
`data` (dict) for assigning instance variable values and then return the instance to the caller.

### 04.3 Test your work

Test your work by calling `get_swapi_resource()` from `main()` and retrieve a dictionary
representation of the the astromech droid __R2-D2__. See the SWAPI
[documentation](https://swapi.py4e.com/documentation) if you need help constructing the
arguments to pass to `get_swapi_resource()`.

:bulb: Search the API's `/people/` category for R2-D2.

Access the "R2-D2" dictionary which is stored in the response object and assign the value to
`r2_d2_data`.

:exclamation: The SWAPI data will serve as the default representation of all droids that you
encounter in this assignment. You will update the SWAPI data with data sourced from Wookieepedia.

Next, retrieve the droid data contained in the file `wookieepedia_droids.json`. Assign the return
value to a variable named `wookiee_droids`.

:bulb: You will use `wookiee_droids` throughout the remainder of this assignment.

Next, access the droid R2-D2 element in `wookiee_droids` by its index value and __update__ the
`r2_d2_data` dictionary with the `wookiee_droids` R2-D2 dictionary.

Next, call `create_droid()` passing to it `r2_d2_data` as an argument and assign the `Droid`
instance returned to a variable named `r2_d2`.

:exclamation: You will make use of the `store_information()` method at a later point in this
assignment.

Finally, call `write_json()` and pass it the following arguments:

* `filepath` = 'stu_swapi_droid_r2_d2.json'
* `data` = JSON-friendly representation of `r2_d2`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_droid_r2_d2.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/people/3/",
  "name": "R2-D2",
  "model": "R2-series astromech droid",
  "manufacturer": "Industrial Automaton",
  "create_year": "32 BBY",
  "height": "108",
  "mass": "32",
  "equipment": "Ascension cable, Buzz saw, Data probe, Electric pike, Fusion welder, Holoprojector, Power recharge coupler, Rocket booster, Water spout",
  "instructions": []
}
```

## Challenge 05

Implement the `Person` class and the functions `create_person()` and `get_wookieepedia_planet()`.

### 05.1 `Person` class

Implement the following methods:

* `__init__()`. Replace `pass` with the required five (5) instance variables and assign the
  requisite value to each instance variable per the listed parameters. Add optional
  `homeworld` and `species` instance variables and assign `None` as the default value of each.

* `__str__()`. Replace `pass` and return the `Person` instance's name.

* `jsonable()`. Replace `pass` and return a JSON-friendly dictionary comprising all the instance
  variables and their values expressed as key-value pairs
  __in the order specified in the Docstring__. This is best accomplished by returning a dictionary
  literal.

:exclamation: The `jsonable()` method _must_ convert both the `homeworld` and `species` values to
dictionaries or `None` __before__ creating a dictionary representation of the `Person` instance and
returning it to the caller.

For the `homeworld` instance variables write code that implements the following `if-else` logic:

1. Check if the instance variable _has_ a value (truth value test).

2. If `True` then convert the value (a `Planet` instance) to a dictionary (there's a
   method you can call to perform this task) and assign it to a local variable; if `False` assign
   the local variable a value of `None`.

3. Assign the local variable to the appropriate key in the dictionary that the `jsonable()` method
   will return to the caller (e.g., `'homeworld': some_local_var` rather than
   `'homeworld': self.homeworld`).

Implement the same `if-else` logic for handling the `species` instance variable (a `Species`
instance).

### 05.2 `get_wookieepedia_planet()` function

This function provides a data lookup capability for the `create_person()`
function.

Replace `pass` and implement a `for` loop that loops over the passed in Wookieepedia  `planets`
list. Inside the `for` loop check if each planet encountered possesses the same name value as the
passed in `name` argument. If a match is obtained, return the planet.

### 05.3 `create_person()` function

Replace `pass` with a code block that instantiates an instance of `Person` using the passed in
`data` (dict) for assigning instance variable values and then return the instance to the caller.

:exclamation: note that `create_person()` defines an optional `planets` parameter for passing in
supplemental homeworld planetary data sourced from Wookieepedia (i.e., `wookiee_planets`).

:exclamation: Two additional tasks _must_ be performed by `create_person()` that parallel the extra
logic required in the `Person` class' `jsonable()` method.

First, instantiate an instance of `Person` using the passed in `data` dictionary as values for the
instance variables. Assign it to a local variable named `person`.

Next, write an `if` statement code block that attempts to combine SWAPI planet data with the passed
in `wookiee_planets` data _before_ creating an instance of `Planet` and assigning it to the `person`
instance variable `homeworld`. This operation is no different than the data "blending" tasks
performed for other class instances that instantiataed with SWAPI and Wookieepedia data.

The `if` code block needs to perform the following tasks:

1. Check if the passed in `data` dictionary _has_ a `homeworld` URL value (truth value test).

2. If `True` then call `get_swapi_resource()` and pass to it the homeworld URL in order to retrieve
   a dictionary representation of the person's `homeworld`. Assign it to a local variable named
   `homeworld_data`.

3. Also inside the `if` block check if a `planets` value was passed to `create_person()`. If
   `True` call the function `get_wookieepedia_planet()` and pass to it the `planets` list _and_
   the planet name contained in `homeworld_data`. Assign the return value to a local variable
   named `planet_data`.

4. If `planet_data` _has_ a value (truth value test) then combine the `planet_data` with the
   default `homeworld_data`.

5. Call `create_planet()` and pass to it the updated `homeworld_data` dictionary. Assign the
   return value (a `Planet` instance) to the `person` instance's `homeworld` variable.

Write a second `if` code block to process the `data` dictionary's `species` value. The `if` code
block needs to perform the following tasks:

1. Check if the passed in `data` dictionary _has_ a `species` value (truth value test).

2. If `True` access the `data` species URL (warning: it's inside a list) and then call
   `get_swapi_resource()` and pass the species URL to it in order to retrieve a dictionary
   representation of the person's `species`. Assign the return value to a local variable named
   `species_data`.

3. Call `create_species()` and pass to it `species_data`. Assign the return value (a `Species`
   instance) to the `person` instance's `species` variable.

Later you will modify (refactor) these two `if` statement code blocks in order to convert certain
string values to different types (e.g., `float`, `int`, `list`, `None`) by calling the yet to be
implemented `clean_data()` function.

:bulb: Local function variable names like `homeworld_data` and `planet_data` are recommendations;
you are free to choose any name you prefer.

### 05.4 Test your work

Test your work by calling `get_swapi_resource()` from `main()` and retrieve a dictionary
representation of __Leia Organa__. See the SWAPI
[documentation](https://swapi.py4e.com/documentation) if you need help constructing the arguments
to pass to `get_swapi_resource()`.

:bulb: Search the API's `/people/` category for Leia.

Access the "Leia Organa" dictionary which is stored in the response object and assign the value to
`leia_data`.

Next, retrieve the people data contained in the file `wookieepedia_people.json`. Assign the return
value to a variable named `wookiee_people`.

:bulb: You will use `wookiee_people` throughout the remainder of this assignment.

Next, access the Leia Organa dictionary in `wookiee_people` by its index value and __update__ the
`leia_data` dictionary with the `wookiee_people` Leia Organa dictionary.

Next, call `create_person()` passing to it `leia_data` _and_ `wookiee_planets` as arguments and
assign the `Person` instance returned to a variable named `leia`.

Finally, call `write_json()` and pass it the following arguments:

* `filepath` = 'stu_swapi_person_leia.json'
* `data` = JSON-friendly representation of `leia`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_person_leia.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/people/5/",
  "name": "Leia Organa",
  "birth_year": "19 BBY",
  "height": "155",
  "mass": "51",
  "homeworld": {
    "url": "https://swapi.py4e.com/api/planets/2/",
    "name": "Alderaan",
    "region": "Core Worlds",
    "sector": "Alderaan sector",
    "suns": "1",
    "moons": "0",
    "orbital_period_days": "364",
    "diameter_km": "12500",
    "gravity": "1 standard",
    "climate": "Temperate",
    "terrain": "Forests, Mountains, Plains",
    "population": "2000000000"
  },
  "species": {
    "url": "https://swapi.py4e.com/api/species/1/",
    "name": "Human",
    "classification": "mammal",
    "designation": "sentient",
    "language": "Galactic Basic"
  }
}
```

:exclamation: After you implement `clean_data()` below and add calls to the function from
 `create_person()` running `swapi.py` will generate a partially "cleaned" version of this JSON file
 with certain string values converted to `float`, `int`, `list`, and `None` types.

## Challenge 06

Implement the `Passengers` class.

:bulb: The provided `Crew` class (a version of which was featured during a recent lecture) will
serve as a guide when implementing the `Passengers` class. The purpose of both classes is to model
groups of individuals (persons and droids) that can be placed on board a starship.

### 06.1 `Passengers` class

Implement the following methods:

:bulb: review the `Crew` class before implementing the `Passengers` class.

* `__init__()`. Replace `pass` and implement the method in a manner similar to the `Crew` class
  __init__() method. In the case of `Passengers` the __init__() method accepts a `list` rather than
  a `dict`.

  1. Loop over the passed in list of `Person` and/or `Droid` objects and call the built-in function
    `setattr()` to generate the instance variable and assign the value. The name of each `Droid` or
    `Person` instance encountered will serve as the instance variable name to which the accompanying
    `Person` > or `Droid` instance value will be assigned.

  2. Adopt the following instance variable naming format:

     __lowercase with spaces replaced by underscores__, e.g., "Luke Skywalker" to "luke_skywalker".

     ```python
     setattr(self, < reformated_object_name_str >, object)
     ```

* `__str__()`. Already implemented. Review but do not modify.

* `jsonable()`. Replace `pass` and return a JSON-friendly `list` of dictionaries that represent
  each passenger. The order of the passenger dictionaries will match the order of the instance
  variables generated by the `__init__()` method.

  Review the `Crew` class `jsonable()` method code block; mimic it with the following changes:

  1. Create a local variable and assign to it an empty `list` (the accumulator).

  2. Loop over `self.__dict__.values()` and append a JSON-friendly representation of each passenger
     object value (i.e., a `dict`) to the accumulator list.

  3. Return the accumulator list to the caller.

You will test your implmentation of `Passengers` later in the assignment.

## Challenge 07

Implement the `Starship` class and the function `create_starship()`.

### 07.1 `Starship` class

Implement the following methods:

* `__init__()`. Replace `pass` with the required fourteen (14) instance variables and assign the
  requisite value to each instance variable per the listed parameters. Add optional
  `crew_members` and `passengers_on_board` instance variables and assign `None` as the default value
  of each.

* `__str__()`. Replace `pass` and return the `Starship` instance's __model__ value (_not_ name).

* `assign_crew_members()`. Replace `pass` and assign the passed in `Crew` instance to the `crew_members`
  instance variable.

* `add_passengers()`. Replace `pass` and assign the passed in `Passengers` instance to the
  `passengers_on_board` instance variable _if_ the `self.passengers` values is greater than zero
  (`> 0`).

* `jsonable()`. Replace `pass` and return a JSON-friendly dictionary comprising all the instance
  variables and their values expressed as key-value pairs
  __in the order specified in the Docstring__. This is best accomplished by returning a dictionary
  literal.

:exclamation: The `jsonable()` method _must_ convert both the `crew_members` and
`passengers_on_board` values to dictionaries or `None` __before__ creating a dictionary
representation of the `Starship` instance and returning it to the caller.

For the `crew_members` instance variables write code that implements the following `if-else` logic
(the same `if-else` logic employed earlier in the `Person` class' `jsonable()` method's handling of
the `homeworld` and `species` values):

1. Check if the instance variable _has_ a value (truth value test).

2. If `True` then convert the value (a `Crew` instance) to a dictionary and assign it to a local
   variable; if `False` assign the local variable a value of `None`.

3. Assign the local variable to the appropriate key in the dictionary that the `jsonable()` method
   will return to the caller (e.g., `'crew_members': some_local_var` rather than
   `'crew_members': self.crew_members`).

Implement the same `if-else` logic for handling the `passengers_on_board` instance variable (a
`Passengers` instance).

### 07.2 `create_starship()` function

Replace `pass` with a code block that instantiates an instance of `Starship` using the passed in
`data` (dict) for assigning instance variable values and then return the instance to the caller.

### 07.3 Test your work

Test your work by calling `get_swapi_resource()` from `main()` and retrieve a dictionary
representation of the __T-70 X-wing__. See the SWAPI
[documentation](https://swapi.py4e.com/documentation) if you need help constructing the arguments
to pass to `get_swapi_resource()`.

:bulb: Search the API's `/starships/` category for the T-70 X-wing.

Access the "T-70 X-wing" dictionary which is stored in the response object and assign the value to
`x_wing_data`.

Next, retrieve the people data contained in the file `wookieepedia_starships.csv`. Assign the
return value to a variable named `wookiee_starships`.

:bulb: You will use `wookiee_starships` throughout the remainder of this assignment.

Next, access the T-70 X-wing dictionary in `wookiee_starships` by its index value and __update__ the
`x_wing_data` dictionary with the `wookiee_starships` T-70 X-wing dictionary.

Next, call `create_starship()` passing to it `x_wing_data` as an argument and assign the `Starship`
instance returned to a variable named `x_wing`.

:exclamation: you will make use of the `assign_crew_members()` and `assign_passengers()` methods later in
the assignment.

Finally, call `write_json()` and pass it the following arguments:

* `filepath` = 'stu_swapi_starship_x_wing.json'
* `data` = JSON-friendly representation of `x_wing`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_starship_x_wing.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/starships/77/",
  "name": "X-wing",
  "model": "T-70 X-wing",
  "starship_class": "Starfighter",
  "manufacturer": "Incom Corporation",
  "length": "12.49",
  "max_atmosphering_speed": "1100",
  "hyperdrive_rating": "1.0",
  "MGLT": "110",
  "armament": "4 x Taim & Bak KX12 laser cannons, 2 x Krupx MG7-A torpedo launchers, 8 x Miniaturized Krupx MG7-A proton torpedoes, 4 x Ion bombs, 1 x BlasTech Ax-190-B blaster cannon (undercarriage-mounted)",
  "crew": "1",
  "crew_members": null,
  "passengers": "0",
  "passengers_on_board": null,
  "cargo_capacity": "110",
  "consumables": "1 week"
}
```

## Challenge 08

Implement the `clean_data()` function.

### 08.1 `clean_data()` function

Replace `pass` with a code block that will convert certain string values to more appropriate data
types (`float`, `int`, `list`, and `None`). Both the SWAPI and Wookieepedia JSON data values are
all of type string despite containing numbers and strings that can/should be stored as lists or, in
some cases, converted to `None`. The job of `clean_data()` is to inspect each passed in dictionary
and convert certain specified string values to a different data type using the relevant built-in
function or the `list.split()` method (when converting certain strings to a list) if the value's
key name is mapped to another type.

The function does not need to know what kind of `data` dictionary is being passed to it. It need
only check if the `data` dictionary's keys are referenced in one of the tuples in `var_types`. If a
match is obtained the key's value is to be converted to the type indicated by the tuple's key.

The following key-value pairs are flagged for conversion:

| Type | key-value pairs to convert |
|:---- | :------------------------- |
| `float` | height, hyperdrive_rating, length, mass, orbital_period_days |
| `int` | cargo_capacity, crew, diameter_km, max_atmosphering_speed, moons, MGLT, passengers, population, suns |
| `list` | armament, climate, equipment, terrain |

:exclamation: In addition, the function _must_ convert the following _values_ to `None` whenever
they are encountered: __'n/a', 'none', 'unknown', '' (i.e., blank)__.

Utilize the "accumulator" pattern to assemble a "cleaned" dictionary that includes _both_
converted key-value pairs _and_ unconverted key-value pairs that don't meet the conditions specified
above. Writing conditional statements that perform membership checks is another key feature of this
function's implementation.

A few suggestions should suffice to get you started:

1. Create a local variable named `var_types` that will serve as a "mapper" that links each key name
   listed in the above table to a particular type.

   ```python
   var_types = {
       '< type >': (< 'key 01', 'key 02', . . .  >),
       . . .
       }
   ```

2. Create a local variable named `cleaned` and assign it an empty dictionary (the accumulator).

3. Next, implement a `for` loop in order to iterate over the passed in `data` dictionary's key-value
   pairs.

   Filter out non `str` values by checking if the value is of type `str` by calling the
   built-in `isinstance()` function (see example below). If a non `str` value is encountered
   (e.g., `None`) assign the key-value pair to `cleaned` unchanged.

4. Inside the `if isinstance(val, str):` block start with an `if` statement that checks whether or
   not `val` is equal to __'n/a', 'none', 'unknown', or ''__. If the expression evaluates
   to `True` convert the `val` to `None` and assign the "converted" key-value pair to `cleaned`.

5. Follow with a series of `elif` statements that perform additional `var_type` membership checks
   on each key encountered in the loop, e.g., is the key a member of a `var_types` tuple. If the
   expression evaluates to `True` convert `val` to the type specified by the `var_type` key (i.e.,
   `float`, `int`, or `list`).

6. End with an `else` condition. Most key-value pairs are not flagged for conversion and _must_
   be assigned to `cleaned` unchanged. Think of the key-value pairs as dropping through the
   conditional checks; if a key-value pair makes it to the `else` condition, no conversion is
   required; write it the `cleaned` without modification.

   ```python
   cleaned = {}
    for key, val in data.items():
        if isinstance(val, str):
            # implement if-elif...-else conditional logic here
        else:
            cleaned[key] = val # non str key-value pairs
   ```

7. Return `cleaned` to the caller.

### 08.2 modify create_person()

:exclamation: With `clean_data()` implemented return to `create_person()` and insert two calls to
`clean_data()`; one to "clean" the updated `homeworld_data` and the second to "clean"
`species_data`. Locate the function call immediately before calling `create_planet()` and
`create_species()` respectively. This will ensure that the returned `Planet` and `Species`
instances will feature converted string values.

:bulb: this is what we call "refactoring" work; modifying the behavior of piece of code
(in this case a function) in order to incorporate a change in the workflow or business rules.

### 08.3 Test your work

Test your work by calling `clean_data()` in `main()` passing to it the updated `x_wing_data`
dictionary created earlier. Assign the return value to a variable named `x_wing_data_cleaned`.

Then call `create_starship()` passing to it `x_wing_data_cleaned`. Assign the return value to
`x_wing`.

Finally, call `write_json()` and pass it the following arguments:

* `filepath` = 'stu_swapi_starship_x_wing_cleaned.json'
* `data` = JSON-friendly representation of `x_wing`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.

If you are following this guide's recommended path to success your version of
`stu_swapi_starship_x_wing.json` should match the following JSON:

```json
{
  "url": "https://swapi.py4e.com/api/starships/77/",
  "name": "X-wing",
  "model": "T-70 X-wing",
  "starship_class": "Starfighter",
  "manufacturer": "Incom Corporation",
  "length": 12.49,
  "max_atmosphering_speed": 1100,
  "hyperdrive_rating": 1.0,
  "MGLT": 110,
  "armament": [
    "4 x Taim & Bak KX12 laser cannons",
    "2 x Krupx MG7-A torpedo launchers",
    "8 x Miniaturized Krupx MG7-A proton torpedoes",
    "4 x Ion bombs",
    "1 x BlasTech Ax-190-B blaster cannon (undercarriage-mounted)"
  ],
  "crew": 1,
  "crew_members": null,
  "passengers": 0,
  "passengers_on_board": null,
  "cargo_capacity": 110,
  "consumables": "1 week"
}
```

## Challenge 09

With all classes and functions implemented it's time to recreate three incidents from the
[_The Force Awakens_](https://starwars.fandom.com/wiki/Star_Wars:_Episode_VII_The_Force_Awakens).

For this challenge, you will recreate (in part) the "Mission to Jakku", the Resistance pilot Poe
Dameron's attempt to retrieve a star map in the possession of Lor San Tekka. You will assign Poe and
the astromech droid BB8 to a T-70 X-wing starfighter and provide a flight plan and data on Lor San
Tekka for BB8 to store and process. The goal is to create objects comprising combined and cleaned
data to be written to a file as JSON that will match the test fixture file
`fxt_episode_vii_mission_jakku.json`.

This challenge is also used to test your refactoring of `create_person()` to ensure that it includes
the requisite calls to `clean_data()`.

Complete the following tasks in `main()`:

### 09.1 Poe Dameron

__Retrieve__ a SWAPI representation of the Resistance pilot Poe Dameron. __Assign__ the decoded
JSON to a variable named `poe_data`. __Update__ `poe_data` with the Poe Dameron dictionary found in `wookiee_people`. __Clean__ `poe_data`. __Call__ `create_person()` and pass to it both `poe_data`
and `wookiee_planets`. Assign the return value to a variable named `poe`.

### 09.2 BB8

__Retrieve__ a SWAPI representation of the Resistance astromech droid BB8. __Assign__ the decoded
JSON to a variable named `bb8_data`. __Update__ `bb8_data` with the BB8 dictionary found in
`wookiee_droids`. __Clean__ `bb8_data`. __Call__ `create_droid()` and pass to it `bb8_data`.
__Assign__ the return value to a variable named `bb8`.

### 09.3 Jakku

__Retrieve__ a SWAPI representation of the planet Jakku. Assign the decoded JSON to a variable named
`jakku_data`. __Update__ `jakku_data` with the Jakku dictionary found in `wookiee_planets`.
__Clean__ `jakku_data`. __Call__ `create_planet()` and pass to it `jakku_data`. Assign the return
value to a variable named `jakku`.

### 09.4 Flight plan

__Create__ a nested dictionary as described below. For the `destination` value, __call__ the `jakku`
   instance's `jsonable()` method to return a JSON-friendly dictionary version of the object.

   ```python
   {
     'flight_plan': {
       'destination': jakku.jsonable(),
       'hyperspace_route': "Burke's Trailing",
       'year': "34 ABY"
       }
   }
   ```

__Assign__ the nested dictionary to a variable named `flight_plan`. __Call__
`bb8.store_instructions()` and pass to it the flight plan.

### 09.5 Locate person instructions

__Access__ the Lor San Tekka dictionary in `wookiee_people`. __Assign__ the dictionary to a variable
named `lor_data`. Note: there is no SWAPI representation of Lor San Tekka, so clean `lor_data` as
is. __Call__ `create_person()` and pass to it both `lor_data` and `wookiee_planets`. __Assign__ the
return value to a variable named `lor`. __Create__ a dictionary with a key named `locate_person` and
the value a JSON-friendly version of the `lor` instance. Give the dictionary to `bb8` to __store__
as instructions.

   ```python
      {
        'locate_person': lor.jsonable()
      }
   ```

### 09.6 Assign crew

__Create__ a `Crew` instance passing in a dictionary listing `poe` as "pilot" and `bb8` as the
"astro_mech_droid". Read the `Crew` `__init__()` Docstring to understand how to represent the
key-value pairs. Assign the instance to `x_wing_crew`. __Call__ `x_wing.assign_crew_members()`
and assign the crew to the X-wing.

### 09.7. Write to file

__Call__ `write_json()` and pass to it the following arguments:

* `filepath` = 'stu_episode_vii_mission_jakku.json'
* `data` = JSON-friendly representation of `x_wing`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.
The JSON file you produce _must_ match the test fixture file `fxt_episode_vii_mission_jakku.json`.

## Challenge 10

For this challenge, you will recreate Poe Dameron's decision to entrust BB8 with a copy of the star
map given to him by Lor San Tekka minutes before the attack on Tuanul by First Order stormtroopers.
The goal is to create objects comprising combined and cleaned data that can be written to a file as
JSON that will match the test fixture file `fxt_episode_vii_star_map.json`.

Complete the following tasks in `main()`.

### 10.1 Star map

__Call__ `read_json()` and retrieve the holographic map fragment contained in
`wookieepedia_star_map.json`. Assign the return value to a variable named `wookiee_star_map`.
__Clean__ the `wookiee_star_map`. __Create__ a dictionary with a key named `star_map`. __Assign__
the `wookiee_star_map` as the value. Give the the dictionary to `bb8` to store as instructions.

   ```python
      {
        'star_map': wookiee_star_map
      }
   ```

### 10.2 Write to file

Call `write_json()` and pass to it the following arguments:

* `filepath` = 'stu_episode_vii_star_map.json'
* `data` = JSON-friendly representation of `bb8`

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.
The JSON file you produce _must_ match the test fixture file `fxt_episode_vii_star_map.json`.

## Challenge 11

For this challenge, you will recreate (in part) the "Escape from Jakku", in which the scavenger Rey,
the stormtrooper deserter known as Finn, and the astromech droid BB8, escape from pursuing First
Order forces aboard the Corellian YT-1300f light freighter _Millennium Falcon_. The goal is to
create objects comprising combined and cleaned data that can be written to a file as JSON that will
match the test fixture file `fxt_episode_vii_escape_jakku.json`.

Complete the following tasks in  `main()`:

### 11.1 Rey

__Retrieve__ a SWAPI representation of the Jakku scavenger Rey. __Assign__ the decoded JSON to a
variable named `rey_data`. __Update__ `rey_data` with the Rey dictionary found in `wookiee_people`.
__Clean__ `rey_data`. __Call__ `create_person()` and pass to it both `rey_data` and
`wookiee_planets`. __Assign__ the return value to a variable named `rey`.

### 11.2 Finn

__Retrieve__ a SWAPI representation of the stormtrooper deserter known as Finn. __Assign__ the
decoded JSON to a variable named `finn_data`. __Update__ `finn_data` with the Finn dictionary found
in `wookiee_people`. __Clean__ `finn_data`. __Call__ `create_person()` and pass to it both
`finn_data` and `wookiee_planets`. Assign the return value to a variable named `finn`.

### 11.3 Millennium Falcon

__Retrieve__ a SWAPI representation of the starship _Millennium Falcon_. __Assign__ the decoded
JSON to a variable named `m_falcon_data`. __Update__ `m_falcon_data` with the Millennium Falcon
dictionary found in `wookiee_starships`. __Clean__ `m_falcon_data`. __Call__ `create_starship()` and
pass to it `m_falcon_data`. Assign the return value to a variable named `m_falcon`.

### 11.4 Assign crew

__Create__ a `Crew` instance passing in a dictionary listing `rey` as "pilot" and `finn` as "gunner".
Read the `Crew` `__init__()` Docstring to understand how to represent the key-value pairs.
__Assign__ the instance to `m_falcon_crew`. __Call__ `m_falcon.assign_crew_members()` and assign the
crew to the Millennium Falcon.

### 11.5 Add passengers

__Create__ a `Passengers` instance passing in a list containing `bb8`. Read the `Passengers`
`__init__()` Docstring to understand how to create the instance variable name and assign to it
`bb8`. __Assign__ the instance to `m_falcon_passengers`.

__Call__ `m_falcon.add_passengers()` and add BB8 to the Millennium Falcon as a passenger.

### 11.6 Write to file

__Call__ `write_json()` and pass to it the following arguments:

* `filepath` = 'stu_episode_vii_escape_jakku.json'
* `data` = JSON-friendly representation of `m_falcon`.

Review the file output and submit your (partially completed) assignment to Gradescope for scoring.
The JSON file you produce _must_ match the test fixture file `fxt_episode_vii_escape_jakku.json`.

## Challenge 12

For this final challenge, you will recreate (in part) the "Journey to Takodana", in which the Han
Solo and the Chewbacca, reunited with their old ship the _Millennium Falcon_, agree to take Rey,
Finn, and BB8 to the planet Takodana in an effort to deliver BB8 and the star map it carries to
the Resistance.

Complete the following tasks in  `main()`:

### 12.1 Han Solo

__Retrieve__ a SWAPI representation of the  Corellian smuggler Han Solo. __Assign__ the decoded
JSON to a variable named `han_solo_data`. __Update__ `han_solo_data` with the Han Solo dictionary
found in `wookiee_people`. __Clean__ `han_solo_data`. __Call__ `create_person()` and pass to it both
`han_solo_data` and `wookiee_planets`. __Assign__ the return value to a variable named `han_solo`.

### 12.2 Chewbacca

__Retrieve__ a SWAPI representation of the Wookiee Chewbacca. Assign the decoded JSON to a variable
named `chewie_data`. __Update__ `chewie_data` with the Chewbacca dictionary found in
`wookiee_people`. __Clean__ `chewie_data`. __Call__ `create_person()` and pass to it both
`chewie_data` and `wookiee_planets`. __Assign__ the return value to a variable named `chewie`.

### 12.3 (Re)assign the crew

__Create__ a `Crew` instance passing in a dictionary listing `han_solo` as "pilot" and `chewie` as
"co-pilot". __Assign__ the instance to `m_falcon_crew`. __Call__ `m_falcon.assign_crew_members()` and
assign the crew to the Millennium Falcon.

### 12.4 Add passengers

__Create__ a `Passengers` instance passing in a list containing `rey`, `finn`, and `bb8`.
__Assign__ the return value to the variable `m_falcon_passengers`.

__Call__ `m_falcon.add_passengers()` and Rey, Finn, and BB8 to the Millennium Falcon as passengers.

### 12.5 Write to file

__Call__ `write_json()` and pass to it the following arguments:

* `filepath` = 'stu_episode_vii_journey_takodana.json'
* `data` = JSON-friendly representation of `m_falcon`.

__Review__ the file output and submit your (partially completed) assignment to Gradescope for
scoring. The JSON file you produce _must_ match the test fixture file

`fxt_episode_vii_journey_takodana.json`.

__Finis__.

## 13.0 Gradescope submissions

You may submit your last assignment solution to Gradescope as many times as needed before the
expiration of the submission time. Your __final__ submission will constitute your last assignment
submission.

:exclamation: Last assignment solutions will not be accepted after the expiration of submission time
and will receive a zero score.

## 14.0 Auto grader / manual scoring

The autograder runs 38 tests against the Python file you submit, which the autograder imports as
a module so that it can gain access to and inspect the classes, functions and other objects defined
in your code. The functional tests are of two types:

1. The first type will attempt to instantiate an instance of a class, call class methods or
   functions by passing in known argument values and comparing the return value against an expected
   value for equality. If the function's return value does not equal the expected return value, the
   test will fail.

2. The second type of test involves checking variable assignments in `main()`. This type of test
   evaluates the code you write, character for character, against an expected line of code using a
   [regular expression](https://realpython.com/regex-python/) to account for permitted variations
   in the expressions you write. The test searches `main()` for the expected line of code. If not
   located the test will fail.

If the auto grader is unable to grade your submission successfully with a score of 1800 points the
teaching team will grade your submission __manually__. Partial credit __may__ be awarded for
submissions that fail one or more autograder tests if the teaching team (at their sole discretion)
deem a score adjustment warranted.

If you submit a partial solution, please include (if you have time) comments that explain what you
were attempting to accomplish in the area(s) of the program that are not working properly. We
will review your comments when determining partial credit.
